<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Hello wasm-pack!</title>
  </head>
  <body>
    <noscript>This page contains webassembly and javascript content, please enable javascript in your browser.</noscript>
    <!-- Include the JS generated by `wasm-pack build` -->
    <button type="button" id="hello">Click Me</button>

    <script type="module">
      import init, { add, greet } from './pkg/hello_world.js';

      async function run() {
        await init();

        // And afterwards we can use all the functionality defined in wasm.
        const result = add(1, 2);
        console.log(`1 + 2 = ${result}`);
        if (result !== 3)
          throw new Error("wasm addition doesn't work!");
      }
      async function say_hello() {
        await init();

        greet();
      }
      // add eventlistener
      document.querySelector('#hello').addEventListener('click', say_hello)

      // will execute immediatly check console.log
      run();
    </script>
  </body>
</html>