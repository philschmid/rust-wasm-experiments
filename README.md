# Rust WebAssembly Experiments

## üö¥ Getting Started

0. install `rust`
1. install `wasm-pack` with 
```bash
cargo install wasm-pack
```
2. build hello world
```bash
cd hello-world &&  wasm-pack build
```
3. Test in Headless Browsers with `wasm-pack test`
```
wasm-pack test --headless --chrome
```
4. Publish to NPM with `wasm-pack publish`
```
wasm-pack publish
```
5. use in html file without modules.
rebuild with `no-modules`
```bash
wasm-pack build --target web
```
create `index.html`
```html
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Hello wasm-pack!</title>
  </head>
  <body>
    <noscript>This page contains webassembly and javascript content, please enable javascript in your browser.</noscript>
    <!-- Include the JS generated by `wasm-pack build` -->
    <button type="button" id="hello">Click Me</button>

    <script type="module">
      import init, { add, greet } from './pkg/hello_world.js';

      async function run() {
        await init();

        // And afterwards we can use all the functionality defined in wasm.
        const result = add(1, 2);
        console.log(`1 + 2 = ${result}`);
        if (result !== 3)
          throw new Error("wasm addition doesn't work!");
      }
      async function say_hello() {
        await init();

        greet();
      }
      // add eventlistener
      document.querySelector('#hello').addEventListener('click', say_hello)

      // will execute immediatly check console.log
      run();
    </script>
  </body>
</html>
```

## üõ†Ô∏è Resources

* [Rust ü¶Ä and WebAssembly üï∏](https://rustwasm.github.io/docs/book/introduction.html#rust--and-webassembly-)
* [Rust `wasm-pack`](https://rustwasm.github.io/docs/wasm-pack/introduction.html)
* [Rust Webassembly Examples from sendign requests to websockets and webrtc](https://rustwasm.github.io/wasm-bindgen/examples/index.html)
* [Rust wasm page](https://rustwasm.github.io/)
* [Building WASM for web targets](https://rustwasm.github.io/wasm-bindgen/examples/without-a-bundler.html)
* [WASM Onnxruntime in browser](https://github.com/jobergum/browser-ml-inference/blob/main/src/inference.js)
* [Typescript BERT Tokenizer](https://github.com/jobergum/browser-ml-inference/blob/b4e0a471d8ab465df95ca65277dcacbd9e5a43f4/src/bert_tokenizer.ts#L151)
* [WASM rayon bindings](https://github.com/GoogleChromeLabs/wasm-bindgen-rayon)
